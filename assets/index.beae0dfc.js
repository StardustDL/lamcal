var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,o=(e,t,n)=>(s(e,"symbol"!=typeof t?t+"":t,n),n);import{d as i,u,r as c,w as f,p as d,o as h,c as p,a as y,b,e as g,N as m,f as w,g as v,h as _,i as x,j,k,I as S,A as T,L,B as C,G as O,l as z,t as E,C as P,m as $,M as D,n as I,q as U,s as N,v as G,x as M,y as R,z as A,D as F,E as q,F as B,H,J as K,K as V,O as J,P as Q,Q as W,S as X,R as Y,T as Z,U as ee,V as te,W as ne}from"./vendor.9b474d69.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class ae{constructor(e){o(this,"name"),this.name=e}toText(){return this.name}}class re{constructor(e,t){o(this,"arg"),o(this,"body"),this.arg=e,this.body=t}toText(){return`λ${this.arg}.${this.body.toText()}`}}class le{constructor(e,t){o(this,"left"),o(this,"right"),this.left=e,this.right=t}toText(){return`(${this.left.toText()} ${this.right.toText()})`}}function se(e){switch(e.type){case"single":return new ae(e.name);case"abstraction":return new re(e.arg,se(e.body));case"application":return new le(se(e.left),se(e.right))}throw new TypeError(`Unknown type ${e.type}.`)}class oe{constructor(e,t){o(this,"subject"),o(this,"result"),this.result=e,this.subject=t}done(){return null!=this.subject}}function ie(e){if(e instanceof ae);else if(e instanceof le){if(function(e){return e instanceof le&&e.left instanceof re}(e)){let t=e.left,n=de(t.body,t.arg,e.right);return new oe(n,e)}let t=ie(e.left);if(t.done())return new oe(new le(t.result,e.right),t.subject);let n=ie(e.right);if(n.done())return new oe(new le(e.left,n.result),n.subject)}else if(e instanceof re){let t=ie(e.body);if(t.done())return new oe(new re(e.arg,t.result),t.subject)}return new oe(e)}function ue(e){if(e instanceof ae)return new Set([e.name]);if(e instanceof le)return new Set([...ue(e.left),...ue(e.right)]);if(e instanceof re)return new Set([...ue(e.body),e.arg]);throw new TypeError("Unknown term type.")}function ce(e){if(e instanceof ae)return new Set([e.name]);if(e instanceof le)return new Set([...ce(e.left),...ce(e.right)]);if(e instanceof re){let t=ce(e.body);return t.delete(e.arg),t}throw new TypeError("Unknown term type.")}function fe(e){let t=ue(e),n=0;for(;;){let e=`v${n}`;if(!t.has(e))return e;n++}}function de(e,t,n){if(e instanceof ae)return e.name==t?n:e;if(e instanceof le)return new le(de(e.left,t,n),de(e.right,t,n));if(e instanceof re){if(e.arg==t)return e;if(ce(n).has(e.arg)){let a=fe(new le(e,n));return new re(a,de(de(e.body,e.arg,new ae(a)),t,n))}return new re(e.arg,de(e.body,t,n))}throw new TypeError("Unknown term type.")}const he=z("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),pe=z("a",{href:"https://github.com/StardustDL/lamcal/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),ye=z("a",{href:"https://github.com/StardustDL/lamcal",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),be=["href"],ge=z("a",{href:"#",style:{"text-decoration":"none",color:"inherit"}},"Lambda Calculus",-1),me=J("Reduct");const we=i((ve=((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&s(e,n,t[n]);return e})({},{components:{Icon:S,MathFunction:D,ChevronRight:N,Check:G,BrandGithub:C,At:T,License:L,GitCommit:O,Clock:P}}),t(ve,n({setup:async function(e){let t,n;class a{constructor(e,t){var n;o(this,"value"),o(this,"text"),o(this,"subject"),this.value=e,this.text=this.value.toText(),this.subject=null!=(n=null==t?void 0:t.toText())?n:""}}const r=u(),l=c("λx. y"),s=c([]),i=c(null),J=c(""),W=([t,n]=f((async()=>([t,n]=f((()=>fetch("build.json"))),t=await t,n(),t).json())),t=await t,n(),t),X=([t,n]=f((async()=>([t,n]=f((()=>fetch("grammar.peggy"))),t=await t,n(),t).text())),t=await t,n(),t),Y=d.generate(X);function Z(e){i.value=e,J.value=[...ce(i.value)].toString()}function ee(e){return se(Y.parse(e))}function te(){try{const e=ee(`(${l.value})`);s.value.length=0,s.value.push(new a(e)),Z(e)}catch(e){return void r.error(e.toString())}}function ne(){const e=ie(i.value);e.subject?(s.value.push(new a(e.result,e.subject)),Z(e.result)):r.info("Reducted to the final.")}return(e,t)=>(h(),p(g(V),null,{default:y((()=>[b(g(m)),b(g(K),{"content-style":"padding: 24px"},{default:y((()=>[b(g(w),{cols:24},{default:y((()=>[b(g(v),{offset:3,span:18},{default:y((()=>[b(g(_),{vertical:"",size:"large"},{default:y((()=>[b(g(x),{subtitle:"λ 演算"},{extra:y((()=>[b(g(_),null,{default:y((()=>[b(g(j),{text:""},{icon:y((()=>[b(g(k),null,{default:y((()=>[b(g(S),null,{default:y((()=>[b(g(T))])),_:1})])),_:1})])),default:y((()=>[he])),_:1}),b(g(j),{text:""},{icon:y((()=>[b(g(k),null,{default:y((()=>[b(g(S),null,{default:y((()=>[b(g(L))])),_:1})])),_:1})])),default:y((()=>[pe])),_:1}),b(g(j),{text:""},{icon:y((()=>[b(g(k),null,{default:y((()=>[b(g(S),null,{default:y((()=>[b(g(C))])),_:1})])),_:1})])),default:y((()=>[ye])),_:1}),b(g(j),{text:""},{icon:y((()=>[b(g(k),null,{default:y((()=>[b(g(S),null,{default:y((()=>[b(g(O))])),_:1})])),_:1})])),default:y((()=>[z("a",{href:`https://github.com/StardustDL/lamcal/commit/${g(W).commit}`,style:{"text-decoration":"none",color:"inherit"}},E(g(W).shortCommit),9,be)])),_:1}),b(g(j),{text:""},{icon:y((()=>[b(g(k),null,{default:y((()=>[b(g(S),null,{default:y((()=>[b(g(P))])),_:1})])),_:1})])),default:y((()=>[b(g($),{time:new Date(g(W).date),type:"relative"},null,8,["time"])])),_:1})])),_:1})])),avatar:y((()=>[b(g(k),null,{default:y((()=>[b(g(S),{size:"16"},{default:y((()=>[b(g(D))])),_:1})])),_:1})])),title:y((()=>[ge])),_:1}),b(g(I),{size:"large"},{default:y((()=>[b(g(U),{placeholder:"λ term",value:l.value,"onUpdate:value":t[0]||(t[0]=e=>l.value=e)},{prefix:y((()=>[b(g(k),null,{default:y((()=>[b(g(S),{size:"16"},{default:y((()=>[b(g(N))])),_:1})])),_:1})])),_:1},8,["value"]),b(g(j),{onClick:te},{default:y((()=>[b(g(k),null,{default:y((()=>[b(g(S),{size:"16"},{default:y((()=>[b(g(G))])),_:1})])),_:1})])),_:1})])),_:1}),b(g(_),{size:"large"},{default:y((()=>[i.value?(h(),p(g(_),{key:0,size:"large",vertical:""},{default:y((()=>[b(g(M),{label:"Current",value:i.value.toText()},null,8,["value"]),b(g(M),{label:"Free Variables",value:J.value},null,8,["value"]),b(g(R),{vertical:"",style:{width:"100%"}},{default:y((()=>[b(g(j),{onClick:ne},{default:y((()=>[me])),_:1})])),_:1})])),_:1})):A("",!0),s.value.length>0?(h(),p(g(F),{key:1},{default:y((()=>[(h(!0),q(H,null,B(s.value,(e=>(h(),p(g(Q),{key:e.text,title:e.text,time:e.subject},null,8,["title","time"])))),128))])),_:1})):A("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}}))));var ve;ne(((e,t)=>{for(const[n,a]of t)e[n]=a;return e})(i({setup:e=>(e,t)=>(h(),p(g(te),null,{default:y((()=>[b(g(ee),null,{default:y((()=>[b(g(W)),(h(),p(X,null,{default:y((()=>[b(we)])),fallback:y((()=>[b(g(Y),{size:80,id:"loading-spin"})])),_:1})),b(g(Z),{right:100})])),_:1})])),_:1}))}),[["__scopeId","data-v-2b9ab68f"]])).mount("#app");
