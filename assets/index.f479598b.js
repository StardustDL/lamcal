var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(e,t,a)=>(n(e,"symbol"!=typeof t?t+"":t,a),a);import{d as i,u,r as c,w as f,p as d,o as h,c as p,a as v,b as y,e as g,N as b,f as m,g as _,h as w,i as x,j,I as k,M as O,k as T,l as z,C,m as S,n as L,q as P,s as E,t as I,v as $,x as N,y as F,F as M,z as R,A as U,B as q,D as A,E as D,G as K,S as B,H as G,J as H,K as J,L as V,O as Q}from"./vendor.28c08d1c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class W{constructor(e){o(this,"name"),this.name=e}toText(){return this.name}}class X{constructor(e,t){o(this,"arg"),o(this,"body"),this.arg=e,this.body=t}toText(){return`λ${this.arg}.${this.body.toText()}`}}class Y{constructor(e,t){o(this,"left"),o(this,"right"),this.left=e,this.right=t}toText(){return`(${this.left.toText()} ${this.right.toText()})`}}function Z(e){switch(e.type){case"single":return new W(e.name);case"abstraction":return new X(e.arg,Z(e.body));case"application":return new Y(Z(e.left),Z(e.right))}throw new TypeError(`Unknown type ${e.type}.`)}class ee{constructor(e,t){o(this,"subject"),o(this,"result"),this.result=e,this.subject=t}}function te(e){if(e instanceof W)return new Set([e.name]);if(e instanceof Y)return new Set([...te(e.left),...te(e.right)]);if(e instanceof X){let t=te(e.body);return t.delete(e.arg),t}throw new TypeError("Unknown term type.")}const ae=q("a",{href:"#",style:{"text-decoration":"none",color:"inherit"}},"Lambda Calculus",-1),re=A("Reduct");const se=i((le=((e,t)=>{for(var a in t||(t={}))s.call(t,a)&&n(e,a,t[a]);if(r)for(var a of r(t))l.call(t,a)&&n(e,a,t[a]);return e})({},{components:{Icon:k,MathFunction:O,ChevronRight:C,Check:L}}),t(le,a({setup:async function(e){let t,a;class r{constructor(e,t){var a;o(this,"value"),o(this,"text"),o(this,"subject"),this.value=e,this.text=this.value.toText(),this.subject=null!=(a=null==t?void 0:t.toText())?a:""}}const s=u(),l=c("λx. y"),n=c([]),i=c(null),q=c(""),A=([t,a]=f((async()=>([t,a]=f((()=>fetch("grammar.peggy"))),t=await t,a(),t).text())),t=await t,a(),t),K=d.generate(A);function B(e){i.value=e,q.value=[...te(i.value)].toString()}function G(e){return Z(K.parse(e))}function H(){try{const e=G(l.value);n.value.length=0,n.value.push(new r(e)),B(e)}catch(e){return void s.error(e.toString())}}function J(){const e=(t=i.value,new ee(t,t));var t;e.subject?(n.value.push(new r(e.result,e.subject)),B(e.result)):s.info("Reduced to the final.")}return(e,t)=>(h(),p(g(U),null,{default:v((()=>[y(g(b)),y(g(R),{"content-style":"padding: 24px"},{default:v((()=>[y(g(m),{cols:24},{default:v((()=>[y(g(_),{offset:3,span:18},{default:v((()=>[y(g(w),{vertical:"",size:"large"},{default:v((()=>[y(g(x),{subtitle:"λ 演算"},{avatar:v((()=>[y(g(j),null,{default:v((()=>[y(g(k),{size:"16"},{default:v((()=>[y(g(O))])),_:1})])),_:1})])),title:v((()=>[ae])),_:1}),y(g(T),{size:"large"},{default:v((()=>[y(g(z),{placeholder:"λ term",value:l.value,"onUpdate:value":t[0]||(t[0]=e=>l.value=e)},{prefix:v((()=>[y(g(j),null,{default:v((()=>[y(g(k),{size:"16"},{default:v((()=>[y(g(C))])),_:1})])),_:1})])),_:1},8,["value"]),y(g(S),{onClick:H},{default:v((()=>[y(g(j),null,{default:v((()=>[y(g(k),{size:"16"},{default:v((()=>[y(g(L))])),_:1})])),_:1})])),_:1})])),_:1}),y(g(w),{size:"large"},{default:v((()=>[i.value?(h(),p(g(w),{key:0,size:"large",vertical:""},{default:v((()=>[y(g(P),{label:"Current",value:i.value.toText()},null,8,["value"]),y(g(P),{label:"Free Variables",value:q.value},null,8,["value"]),y(g(E),{vertical:"",style:{width:"100%"}},{default:v((()=>[y(g(S),{onClick:J},{default:v((()=>[re])),_:1})])),_:1})])),_:1})):I("",!0),n.value.length>0?(h(),p(g($),{key:1},{default:v((()=>[(h(!0),N(M,null,F(n.value,(e=>(h(),p(g(D),{key:e.text,title:e.text,time:e.subject},null,8,["title","time"])))),128))])),_:1})):I("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}}))));var le;Q(((e,t)=>{for(const[a,r]of t)e[a]=r;return e})(i({setup:e=>(e,t)=>(h(),p(g(V),null,{default:v((()=>[y(g(J),null,{default:v((()=>[y(g(K)),(h(),p(B,null,{default:v((()=>[y(se)])),fallback:v((()=>[y(g(G),{size:80,id:"loading-spin"})])),_:1})),y(g(H),{right:100})])),_:1})])),_:1}))}),[["__scopeId","data-v-2edb0622"]])).mount("#app");
