var he=Object.defineProperty,pe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var G=(e,t,s)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,D=(e,t)=>{for(var s in t||(t={}))ge.call(t,s)&&G(e,s,t[s]);if(J)for(var s of J(t))ye.call(t,s)&&G(e,s,t[s]);return e},P=(e,t)=>pe(e,Be(t));var c=(e,t,s)=>(G(e,typeof t!="symbol"?t+"":t,s),s);import{d as $,w as A,o as f,c as B,a as l,b as a,u as n,N as g,I as y,A as K,e as v,L as Q,B as W,G as X,f as C,t as xe,C as Y,g as ve,h as S,i as Z,j as we,k as be,l as me,F as j,m as b,n as Ne,r as O,p as Se,q as ke,s as Te,v as Ce,S as U,M as ee,x as te,y as Le,z as ze,D as ne,E as ae,H as $e,J as le,K as Ae,O as se,P as re,Q as Oe,R as Ie,T as M,U as Ee,V as Re,W as Fe,X as Ve,Y as Ge,Z as De,_ as Pe,$ as Ue,a0 as Me,a1 as He,a2 as qe}from"./vendor.08935c42.js";const Je=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}};Je();const Ke=C("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),Qe=C("a",{href:"https://github.com/StardustDL/lamcal/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),We=C("a",{href:"https://github.com/StardustDL/lamcal",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),Xe=["href"];async function Ye(e){let t,s;const u=([t,s]=A(async()=>([t,s]=A(()=>fetch("build.json")),t=await t,s(),t).json()),t=await t,s(),t);return(r,i)=>(f(),B(n(S),null,{default:l(()=>[a(n(v),{text:""},{icon:l(()=>[a(n(g),null,{default:l(()=>[a(n(y),null,{default:l(()=>[a(n(K))]),_:1})]),_:1})]),default:l(()=>[Ke]),_:1}),a(n(v),{text:""},{icon:l(()=>[a(n(g),null,{default:l(()=>[a(n(y),null,{default:l(()=>[a(n(Q))]),_:1})]),_:1})]),default:l(()=>[Qe]),_:1}),a(n(v),{text:""},{icon:l(()=>[a(n(g),null,{default:l(()=>[a(n(y),null,{default:l(()=>[a(n(W))]),_:1})]),_:1})]),default:l(()=>[We]),_:1}),a(n(v),{text:""},{icon:l(()=>[a(n(g),null,{default:l(()=>[a(n(y),null,{default:l(()=>[a(n(X))]),_:1})]),_:1})]),default:l(()=>[C("a",{href:`https://github.com/StardustDL/lamcal/commit/${n(u).commit}`,style:{"text-decoration":"none",color:"inherit"}},xe(n(u).shortCommit),9,Xe)]),_:1}),a(n(v),{text:""},{icon:l(()=>[a(n(g),null,{default:l(()=>[a(n(y),null,{default:l(()=>[a(n(Y))]),_:1})]),_:1})]),default:l(()=>[a(n(ve),{time:new Date(n(u).date),type:"relative"},null,8,["time"])]),_:1})]),_:1}))}const Ze={components:{Icon:y,BrandGithub:W,At:K,License:Q,GitCommit:X,Clock:Y}},je=$(P(D({},Ze),{setup:Ye})),et=C("p",null,"An online calculator for lambda calculus (\u03BBx. y).",-1),tt=b("Examples"),nt=$({setup(e){const t=`(\u03BBu. \u03BBv. v)((\u03BBx. x x)(\u03BBx. x x))
-> \u03BBv. v

(\u03BBx. x x) ((\u03BBy. y) (\u03BBz. z))
-> \u03BBz. z

(\u03BBe. \u03BBf. e) ((\u03BBa. \u03BBb. a) x y) ((\u03BBc. \u03BBd. c) u v)
-> x

(\u03BBx. x (\u03BBy. x y y) x)(\u03BBz. \u03BBw. z)
-> \u03BBy.((\u03BBz.\u03BBw.z) y y)
-> \u03BBy.y
`;return(s,u)=>(f(),Z(j,null,[a(n(we),{alt:"Lamcal",height:"300",src:"https://socialify.git.ci/StardustDL/lamcal/image?description=1&font=Bitter&forks=1&issues=1&language=1&owner=1&pulls=1&stargazers=1&theme=Light"}),et,a(n(be),null,{default:l(()=>[tt]),_:1}),a(n(me),{code:t})],64))}});class m{constructor(t){c(this,"name");this.name=t}toText(){return this.name}}class _{constructor(t,s){c(this,"arg");c(this,"body");this.arg=t,this.body=s}toText(){return`(\u03BB${this.arg}.${this.body.toText()})`}}class h{constructor(t,s){c(this,"left");c(this,"right");this.left=t,this.right=s}toText(){let t=this.left.toText(),s=this.right.toText();return`(${t} ${s})`}}function I(e){switch(e.type){case"single":return new m(e.name);case"abstraction":return new _(e.arg,I(e.body));case"application":return new h(I(e.left),I(e.right))}throw new TypeError(`Unknown type ${e.type}.`)}var E;(function(e){e[e.NormalOrder=0]="NormalOrder",e[e.ApplicativeOrder=1]="ApplicativeOrder"})(E||(E={}));class k{constructor(t,s){c(this,"redex");c(this,"result");this.result=t,this.redex=s}done(){return this.redex!=null}}function L(e,t){if(!(e instanceof m)){if(e instanceof h){if(t==0&&H(e)){let r=e.left,i=N(r.body,r.arg,e.right);return new k(i,e)}let s=L(e.left,t);if(s.done())return new k(new h(s.result,e.right),s.redex);let u=L(e.right,t);if(u.done())return new k(new h(e.left,u.result),u.redex);if(t==1&&H(e)){let r=e.left,i=N(r.body,r.arg,e.right);return new k(i,e)}}else if(e instanceof _){let s=L(e.body,t);if(s.done())return new k(new _(e.arg,s.result),s.redex)}}return new k(e)}function at(e){return e instanceof _&&[...T(e)].length==0}function R(e){return e instanceof m?!0:e instanceof h?H(e)?!1:R(e.left)&&R(e.right):e instanceof _?R(e.body):!1}function F(e){if(e instanceof m)return new Set([e.name]);if(e instanceof h)return new Set([...F(e.left),...F(e.right)]);if(e instanceof _)return new Set([...F(e.body),e.arg]);throw new TypeError("Unknown term type.")}function T(e){if(e instanceof m)return new Set([e.name]);if(e instanceof h)return new Set([...T(e.left),...T(e.right)]);if(e instanceof _){let t=T(e.body);return t.delete(e.arg),t}else throw new TypeError("Unknown term type.")}function lt(e){let t=F(e),s=0;for(;;){let u=`v${s}`;if(!t.has(u))return u;s++}}function N(e,t,s){if(e instanceof m)return e.name==t?s:e;if(e instanceof h)return new h(N(e.left,t,s),N(e.right,t,s));if(e instanceof _){if(e.arg==t)return e;if(T(s).has(e.arg)){let u=lt(new h(e,s));return new _(u,N(N(e.body,e.arg,new m(u)),t,s))}else return new _(e.arg,N(e.body,t,s))}else throw new TypeError("Unknown term type.")}function H(e){return e instanceof h&&e.left instanceof _}const st=b("Lambda"),rt=b("\xA0Calculus and "),ut=b("Beta"),ot=b("\xA0Reduction "),it=b(" Reduct in Normal-order "),ct=b(" Reduct in Applicative-order ");async function ft(e){let t,s;class u{constructor(x,p){c(this,"value");c(this,"text");c(this,"redex");c(this,"normal");c(this,"canonical");var z;this.value=x,this.normal=R(this.value),this.canonical=at(this.value),this.text=this.value.toText(),this.redex=(z=p==null?void 0:p.toText())!=null?z:""}}const r=Ne(),i=O("((\u03BBe. \u03BBf. e) (((\u03BBa. \u03BBb. a) x) y)) (((\u03BBc. \u03BBd. c) u) v)"),d=O([]),w=O(null),q=O("");function ue(o,x){return o.normal?"success":o.canonical?"error":x==0?"info":x==d.value.length-1?"warning":"default"}const oe=([t,s]=A(async()=>([t,s]=A(()=>fetch("grammar.peggy")),t=await t,s(),t).text()),t=await t,s(),t),ie=Se.generate(oe);function V(o){w.value=o,q.value=[...T(w.value)].toString()}function ce(o){const x=ie.parse(o);return I(x)}function fe(){try{const o=ce(`(${i.value})`);d.value.length=0,d.value.push(new u(o)),V(o)}catch(o){r.error(o.toString());return}}function de(){const o=L(w.value,E.NormalOrder);o.redex?(d.value.push(new u(o.result,o.redex)),V(o.result)):r.info("Reducted to the final.")}function _e(){const o=L(w.value,E.ApplicativeOrder);o.redex?(d.value.push(new u(o.result,o.redex)),V(o.result)):r.info("Reducted to the final.")}return(o,x)=>(f(),B(n(Re),{cols:24,style:{"padding-top":"24px"}},{default:l(()=>[a(n(Ee),{offset:3,span:18},{default:l(()=>[a(n(ke),null,{default:l(()=>[a(n(Te),null,{default:l(()=>[a(n(S),{vertical:"",size:"large"},{default:l(()=>[a(n(Ce),{subtitle:"\u03BB \u6F14\u7B97\u4E0E \u03B2 \u7EA6\u7B80"},{extra:l(()=>[(f(),B(U,null,{default:l(()=>[a(je)]),_:1}))]),avatar:l(()=>[a(n(g),null,{default:l(()=>[a(n(y),{size:"16"},{default:l(()=>[a(n(ee))]),_:1})]),_:1})]),title:l(()=>[a(n(te),{type:"info"},{default:l(()=>[st]),_:1}),rt,a(n(te),{type:"success"},{default:l(()=>[ut]),_:1}),ot]),_:1}),a(n(Le),{size:"large"},{default:l(()=>[a(n(ze),{placeholder:"\u03BB term",value:i.value,"onUpdate:value":x[0]||(x[0]=p=>i.value=p)},{prefix:l(()=>[a(n(g),null,{default:l(()=>[a(n(y),{size:"16"},{default:l(()=>[a(n(ne))]),_:1})]),_:1})]),_:1},8,["value"]),a(n(v),{onClick:fe},{default:l(()=>[a(n(g),null,{default:l(()=>[a(n(y),{size:"16"},{default:l(()=>[a(n(ae))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(n($e),{"content-style":"padding: 24px"},{default:l(()=>[a(n(S),null,{default:l(()=>[w.value?(f(),B(n(S),{key:0,size:"large"},{default:l(()=>[a(n(S),{size:"large",vertical:""},{default:l(()=>[a(n(le),{label:"Current",value:w.value.toText()},null,8,["value"]),a(n(le),{label:"Free Variables",value:q.value},null,8,["value"]),a(n(Ae),{vertical:"",style:{width:"100%"},size:"large"},{default:l(()=>[a(n(v),{onClick:de},{icon:l(()=>[a(n(g),null,{default:l(()=>[a(n(se))]),_:1})]),default:l(()=>[it]),_:1}),a(n(v),{onClick:_e},{icon:l(()=>[a(n(g),null,{default:l(()=>[a(n(re))]),_:1})]),default:l(()=>[ct]),_:1})]),_:1})]),_:1}),d.value.length>0?(f(),B(n(Oe),{key:0},{default:l(()=>[(f(!0),Z(j,null,Ie(d.value,(p,z)=>(f(),B(n(Fe),{key:p.text,title:p.text,time:p.redex,type:ue(p,z)},null,8,["title","time","type"]))),128))]),_:1})):M("",!0)]),_:1})):M("",!0)]),_:1}),w.value?M("",!0):(f(),B(n(S),{key:0,size:"large",style:{"margin-top":"20px"}},{default:l(()=>[(f(),B(U,null,{default:l(()=>[a(nt)]),_:1}))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}const dt={components:{Icon:y,MathFunction:ee,ChevronRight:ne,Check:ae,BorderInner:re,BorderOuter:se}},_t=$(P(D({},dt),{setup:ft}));var ht=(e,t)=>{for(const[s,u]of t)e[s]=u;return e};const pt=$({setup(e){const t=Ve();return(s,u)=>(f(),B(n(De),{theme:n(t)=="dark"?n(Ge):null},{default:l(()=>[a(n(He),null,{default:l(()=>[a(n(Pe)),(f(),B(U,null,{default:l(()=>[a(_t)]),fallback:l(()=>[a(n(Ue),{size:80,id:"loading-spin"})]),_:1})),a(n(Me),{right:100})]),_:1})]),_:1},8,["theme"]))}});var Bt=ht(pt,[["__scopeId","data-v-382760b5"]]);qe(Bt).mount("#app");
