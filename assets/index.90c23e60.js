var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,i=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&s(e,n,t[n]);return e},o=(e,a)=>t(e,n(a)),u=(e,t,n)=>(s(e,"symbol"!=typeof t?t+"":t,n),n);import{d as c,w as f,o as d,c as h,a as p,b as y,u as g,N as m,I as v,A as w,e as x,L as _,B as b,G as z,f as k,t as O,C as L,g as S,h as T,i as C,j,k as E,l as N,F as $,m as A,n as D,r as I,p as P,q as R,s as B,v as U,x as G,S as M,M as F,y as q,z as H,D as K,E as V,H as J,J as Q,K as W,O as X,P as Y,Q as Z,R as ee,T as te,U as ne,V as ae,W as re,X as le,Y as se,Z as ie,_ as oe,$ as ue,a0 as ce}from"./vendor.9d452234.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const fe=k("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),de=k("a",{href:"https://github.com/StardustDL/lamcal/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),he=k("a",{href:"https://github.com/StardustDL/lamcal",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),pe=["href"];const ye=c(o(i({},{components:{Icon:v,BrandGithub:b,At:w,License:_,GitCommit:z,Clock:L}}),{setup:async function(e){let t,n;const a=([t,n]=f((async()=>([t,n]=f((()=>fetch("build.json"))),t=await t,n(),t).json())),t=await t,n(),t);return(e,t)=>(d(),h(g(T),null,{default:p((()=>[y(g(x),{text:""},{icon:p((()=>[y(g(m),null,{default:p((()=>[y(g(v),null,{default:p((()=>[y(g(w))])),_:1})])),_:1})])),default:p((()=>[fe])),_:1}),y(g(x),{text:""},{icon:p((()=>[y(g(m),null,{default:p((()=>[y(g(v),null,{default:p((()=>[y(g(_))])),_:1})])),_:1})])),default:p((()=>[de])),_:1}),y(g(x),{text:""},{icon:p((()=>[y(g(m),null,{default:p((()=>[y(g(v),null,{default:p((()=>[y(g(b))])),_:1})])),_:1})])),default:p((()=>[he])),_:1}),y(g(x),{text:""},{icon:p((()=>[y(g(m),null,{default:p((()=>[y(g(v),null,{default:p((()=>[y(g(z))])),_:1})])),_:1})])),default:p((()=>[k("a",{href:`https://github.com/StardustDL/lamcal/commit/${g(a).commit}`,style:{"text-decoration":"none",color:"inherit"}},O(g(a).shortCommit),9,pe)])),_:1}),y(g(x),{text:""},{icon:p((()=>[y(g(m),null,{default:p((()=>[y(g(v),null,{default:p((()=>[y(g(L))])),_:1})])),_:1})])),default:p((()=>[y(g(S),{time:new Date(g(a).date),type:"relative"},null,8,["time"])])),_:1})])),_:1}))}})),ge=k("p",null,"An online calculator for lambda calculus (λx. y).",-1),me=A("Examples"),ve=c({setup:e=>(e,t)=>(d(),C($,null,[y(g(j),{alt:"Lamcal",height:"300",src:"https://socialify.git.ci/StardustDL/lamcal/image?description=1&font=Bitter&forks=1&issues=1&language=1&owner=1&pulls=1&stargazers=1&theme=Light"}),ge,y(g(E),null,{default:p((()=>[me])),_:1}),y(g(N),{code:"(λu. λv. v)((λx. (x x))(λx. (x x)))\n-> λv. v\n\n(λx. (x x)) ((λy. y) (λz. z))\n-> λz. z\n\n((λe. λf. e) (((λa. λb. a) x) y)) (((λc. λd. c) u) v)\n-> x\n\n(λx. (x (λy. ((x y) y))))(λz. λw. z)\n-> λw.λy.((λz.λw.z y) y)\n-> λw.λy.y\n"})],64))});class we{constructor(e){u(this,"name"),this.name=e}toText(){return this.name}}class xe{constructor(e,t){u(this,"arg"),u(this,"body"),this.arg=e,this.body=t}toText(){return`λ${this.arg}.${this.body.toText()}`}}class _e{constructor(e,t){u(this,"left"),u(this,"right"),this.left=e,this.right=t}toText(){return`(${this.left.toText()} ${this.right.toText()})`}}function be(e){switch(e.type){case"single":return new we(e.name);case"abstraction":return new xe(e.arg,be(e.body));case"application":return new _e(be(e.left),be(e.right))}throw new TypeError(`Unknown type ${e.type}.`)}var ze,ke;(ke=ze||(ze={}))[ke.NormalOrder=0]="NormalOrder",ke[ke.ApplicativeOrder=1]="ApplicativeOrder";class Oe{constructor(e,t){u(this,"redex"),u(this,"result"),this.result=e,this.redex=t}done(){return null!=this.redex}}function Le(e,t){if(e instanceof we);else if(e instanceof _e){if(0==t&&Ne(e)){let t=e.left,n=Ee(t.body,t.arg,e.right);return new Oe(n,e)}let n=Le(e.left,t);if(n.done())return new Oe(new _e(n.result,e.right),n.redex);let a=Le(e.right,t);if(a.done())return new Oe(new _e(e.left,a.result),a.redex);if(1==t&&Ne(e)){let t=e.left,n=Ee(t.body,t.arg,e.right);return new Oe(n,e)}}else if(e instanceof xe){let n=Le(e.body,t);if(n.done())return new Oe(new xe(e.arg,n.result),n.redex)}return new Oe(e)}function Se(e){return e instanceof we||(e instanceof _e?!Ne(e)&&(Se(e.left)&&Se(e.right)):e instanceof xe&&Se(e.body))}function Te(e){if(e instanceof we)return new Set([e.name]);if(e instanceof _e)return new Set([...Te(e.left),...Te(e.right)]);if(e instanceof xe)return new Set([...Te(e.body),e.arg]);throw new TypeError("Unknown term type.")}function Ce(e){if(e instanceof we)return new Set([e.name]);if(e instanceof _e)return new Set([...Ce(e.left),...Ce(e.right)]);if(e instanceof xe){let t=Ce(e.body);return t.delete(e.arg),t}throw new TypeError("Unknown term type.")}function je(e){let t=Te(e),n=0;for(;;){let e=`v${n}`;if(!t.has(e))return e;n++}}function Ee(e,t,n){if(e instanceof we)return e.name==t?n:e;if(e instanceof _e)return new _e(Ee(e.left,t,n),Ee(e.right,t,n));if(e instanceof xe){if(e.arg==t)return e;if(Ce(n).has(e.arg)){let a=je(new _e(e,n));return new xe(a,Ee(Ee(e.body,e.arg,new we(a)),t,n))}return new xe(e.arg,Ee(e.body,t,n))}throw new TypeError("Unknown term type.")}function Ne(e){return e instanceof _e&&e.left instanceof xe}const $e=A("Lambda"),Ae=A(" Calculus and "),De=A("Beta"),Ie=A(" Reduction "),Pe=A(" Reduct in Normal-order "),Re=A(" Reduct in Applicative-order ");const Be=c(o(i({},{components:{Icon:v,MathFunction:F,ChevronRight:V,Check:J,BorderInner:Y,BorderOuter:X}}),{setup:async function(e){let t,n;class a{constructor(e,t){var n,a;u(this,"value"),u(this,"text"),u(this,"redex"),u(this,"normal"),u(this,"canonical"),this.value=e,this.normal=Se(this.value),this.canonical=(a=this.value)instanceof xe&&0==[...Ce(a)].length,this.text=this.value.toText(),this.redex=null!=(n=null==t?void 0:t.toText())?n:""}}const r=D(),l=I("((λe. λf. e) (((λa. λb. a) x) y)) (((λc. λd. c) u) v)"),s=I([]),i=I(null),o=I("");function c(e,t){return e.normal?"success":e.canonical?"error":0==t?"info":t==s.value.length-1?"warning":"default"}const w=([t,n]=f((async()=>([t,n]=f((()=>fetch("grammar.peggy"))),t=await t,n(),t).text())),t=await t,n(),t),_=P.generate(w);function b(e){i.value=e,o.value=[...Ce(i.value)].toString()}function z(e){return be(_.parse(e))}function k(){try{const e=z(`(${l.value})`);s.value.length=0,s.value.push(new a(e)),b(e)}catch(e){return void r.error(e.toString())}}function O(){const e=Le(i.value,ze.NormalOrder);e.redex?(s.value.push(new a(e.result,e.redex)),b(e.result)):r.info("Reducted to the final.")}function L(){const e=Le(i.value,ze.ApplicativeOrder);e.redex?(s.value.push(new a(e.result,e.redex)),b(e.result)):r.info("Reducted to the final.")}return(e,t)=>(d(),h(g(ae),null,{default:p((()=>[y(g(R)),y(g(ne),{"content-style":"padding: 24px"},{default:p((()=>[y(g(B),{cols:24},{default:p((()=>[y(g(U),{offset:3,span:18},{default:p((()=>[y(g(T),{vertical:"",size:"large"},{default:p((()=>[y(g(G),{subtitle:"λ 演算与 β 约简"},{extra:p((()=>[(d(),h(M,null,{default:p((()=>[y(ye)])),_:1}))])),avatar:p((()=>[y(g(m),null,{default:p((()=>[y(g(v),{size:"16"},{default:p((()=>[y(g(F))])),_:1})])),_:1})])),title:p((()=>[y(g(q),{type:"info"},{default:p((()=>[$e])),_:1}),Ae,y(g(q),{type:"success"},{default:p((()=>[De])),_:1}),Ie])),_:1}),y(g(H),{size:"large"},{default:p((()=>[y(g(K),{placeholder:"λ term",value:l.value,"onUpdate:value":t[0]||(t[0]=e=>l.value=e)},{prefix:p((()=>[y(g(m),null,{default:p((()=>[y(g(v),{size:"16"},{default:p((()=>[y(g(V))])),_:1})])),_:1})])),_:1},8,["value"]),y(g(x),{onClick:k},{default:p((()=>[y(g(m),null,{default:p((()=>[y(g(v),{size:"16"},{default:p((()=>[y(g(J))])),_:1})])),_:1})])),_:1})])),_:1}),i.value?(d(),h(g(T),{key:0,size:"large"},{default:p((()=>[y(g(T),{size:"large",vertical:""},{default:p((()=>[y(g(Q),{label:"Current",value:i.value.toText()},null,8,["value"]),y(g(Q),{label:"Free Variables",value:o.value},null,8,["value"]),y(g(W),{vertical:"",style:{width:"100%"},size:"large"},{default:p((()=>[y(g(x),{onClick:O},{icon:p((()=>[y(g(m),null,{default:p((()=>[y(g(X))])),_:1})])),default:p((()=>[Pe])),_:1}),y(g(x),{onClick:L},{icon:p((()=>[y(g(m),null,{default:p((()=>[y(g(Y))])),_:1})])),default:p((()=>[Re])),_:1})])),_:1})])),_:1}),s.value.length>0?(d(),h(g(Z),{key:0},{default:p((()=>[(d(!0),C($,null,ee(s.value,((e,t)=>(d(),h(g(re),{key:e.text,title:e.text,time:e.redex,type:c(e,t)},null,8,["title","time","type"])))),128))])),_:1})):te("",!0)])),_:1})):te("",!0)])),_:1}),i.value?te("",!0):(d(),h(g(T),{key:0,size:"large",style:{"margin-top":"20px"}},{default:p((()=>[(d(),h(M,null,{default:p((()=>[y(ve)])),_:1}))])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1}))}}));ce(((e,t)=>{for(const[n,a]of t)e[n]=a;return e})(c({setup:e=>(e,t)=>(d(),h(g(ue),null,{default:p((()=>[y(g(oe),null,{default:p((()=>[y(g(le)),(d(),h(M,null,{default:p((()=>[y(Be)])),fallback:p((()=>[y(g(se),{size:80,id:"loading-spin"})])),_:1})),y(g(ie),{right:100})])),_:1})])),_:1}))}),[["__scopeId","data-v-2b9ab68f"]])).mount("#app");
