var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,i=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))l.call(t,n)&&o(e,n,t[n]);return e},s=(e,r)=>t(e,n(r)),u=(e,t,n)=>(o(e,"symbol"!=typeof t?t+"":t,n),n);import{d as c,w as f,o as d,c as h,a as p,b as m,u as y,N as g,I as v,A as w,e as x,L as b,B as _,G as O,f as k,t as S,C as T,g as L,h as C,i as j,r as z,p as E,j as N,k as I,l as P,m as $,S as A,M as D,n as R,q as U,s as B,v as G,x as M,y as F,z as q,D as H,E as K,F as V,H as J,J as Q,K as W,O as X,P as Y,Q as Z,R as ee,T as te,U as ne,V as re,W as ae,X as le,Y as oe}from"./vendor.edcb7910.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ie=k("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),se=k("a",{href:"https://github.com/StardustDL/lamcal/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),ue=k("a",{href:"https://github.com/StardustDL/lamcal",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),ce=["href"];const fe=c(s(i({},{components:{Icon:v,BrandGithub:_,At:w,License:b,GitCommit:O,Clock:T}}),{setup:async function(e){let t,n;const r=([t,n]=f((async()=>([t,n]=f((()=>fetch("build.json"))),t=await t,n(),t).json())),t=await t,n(),t);return(e,t)=>(d(),h(y(C),null,{default:p((()=>[m(y(x),{text:""},{icon:p((()=>[m(y(g),null,{default:p((()=>[m(y(v),null,{default:p((()=>[m(y(w))])),_:1})])),_:1})])),default:p((()=>[ie])),_:1}),m(y(x),{text:""},{icon:p((()=>[m(y(g),null,{default:p((()=>[m(y(v),null,{default:p((()=>[m(y(b))])),_:1})])),_:1})])),default:p((()=>[se])),_:1}),m(y(x),{text:""},{icon:p((()=>[m(y(g),null,{default:p((()=>[m(y(v),null,{default:p((()=>[m(y(_))])),_:1})])),_:1})])),default:p((()=>[ue])),_:1}),m(y(x),{text:""},{icon:p((()=>[m(y(g),null,{default:p((()=>[m(y(v),null,{default:p((()=>[m(y(O))])),_:1})])),_:1})])),default:p((()=>[k("a",{href:`https://github.com/StardustDL/lamcal/commit/${y(r).commit}`,style:{"text-decoration":"none",color:"inherit"}},S(y(r).shortCommit),9,ce)])),_:1}),m(y(x),{text:""},{icon:p((()=>[m(y(g),null,{default:p((()=>[m(y(v),null,{default:p((()=>[m(y(T))])),_:1})])),_:1})])),default:p((()=>[m(y(L),{time:new Date(y(r).date),type:"relative"},null,8,["time"])])),_:1})])),_:1}))}}));class de{constructor(e){u(this,"name"),this.name=e}toText(){return this.name}}class he{constructor(e,t){u(this,"arg"),u(this,"body"),this.arg=e,this.body=t}toText(){return`λ${this.arg}.${this.body.toText()}`}}class pe{constructor(e,t){u(this,"left"),u(this,"right"),this.left=e,this.right=t}toText(){return`(${this.left.toText()} ${this.right.toText()})`}}function me(e){switch(e.type){case"single":return new de(e.name);case"abstraction":return new he(e.arg,me(e.body));case"application":return new pe(me(e.left),me(e.right))}throw new TypeError(`Unknown type ${e.type}.`)}var ye,ge;(ge=ye||(ye={}))[ge.NormalOrder=0]="NormalOrder",ge[ge.ApplicativeOrder=1]="ApplicativeOrder";class ve{constructor(e,t){u(this,"redex"),u(this,"result"),this.result=e,this.redex=t}done(){return null!=this.redex}}function we(e,t){if(e instanceof de);else if(e instanceof pe){if(0==t&&Se(e)){let t=e.left,n=ke(t.body,t.arg,e.right);return new ve(n,e)}let n=we(e.left,t);if(n.done())return new ve(new pe(n.result,e.right),n.redex);let r=we(e.right,t);if(r.done())return new ve(new pe(e.left,r.result),r.redex);if(1==t&&Se(e)){let t=e.left,n=ke(t.body,t.arg,e.right);return new ve(n,e)}}else if(e instanceof he){let n=we(e.body,t);if(n.done())return new ve(new he(e.arg,n.result),n.redex)}return new ve(e)}function xe(e){return e instanceof de||(e instanceof pe?!Se(e)&&(xe(e.left)&&xe(e.right)):e instanceof he&&xe(e.body))}function be(e){if(e instanceof de)return new Set([e.name]);if(e instanceof pe)return new Set([...be(e.left),...be(e.right)]);if(e instanceof he)return new Set([...be(e.body),e.arg]);throw new TypeError("Unknown term type.")}function _e(e){if(e instanceof de)return new Set([e.name]);if(e instanceof pe)return new Set([..._e(e.left),..._e(e.right)]);if(e instanceof he){let t=_e(e.body);return t.delete(e.arg),t}throw new TypeError("Unknown term type.")}function Oe(e){let t=be(e),n=0;for(;;){let e=`v${n}`;if(!t.has(e))return e;n++}}function ke(e,t,n){if(e instanceof de)return e.name==t?n:e;if(e instanceof pe)return new pe(ke(e.left,t,n),ke(e.right,t,n));if(e instanceof he){if(e.arg==t)return e;if(_e(n).has(e.arg)){let r=Oe(new pe(e,n));return new he(r,ke(ke(e.body,e.arg,new de(r)),t,n))}return new he(e.arg,ke(e.body,t,n))}throw new TypeError("Unknown term type.")}function Se(e){return e instanceof pe&&e.left instanceof he}const Te=k("a",{href:"#",style:{"text-decoration":"none",color:"inherit"}},"Lambda Calculus",-1),Le=Z(" Reduct in Normal-order "),Ce=Z(" Reduct in Applicative-order ");const je=c(s(i({},{components:{Icon:v,MathFunction:D,ChevronRight:B,Check:G,BorderInner:H,BorderOuter:q}}),{setup:async function(e){let t,n;class r{constructor(e,t){var n,r;u(this,"value"),u(this,"text"),u(this,"redex"),u(this,"normal"),u(this,"canonical"),this.value=e,this.normal=xe(this.value),this.canonical=(r=this.value)instanceof he&&0==[..._e(r)].length,this.text=this.value.toText(),this.redex=null!=(n=null==t?void 0:t.toText())?n:""}}const a=j(),l=z("(λu. λv. v)((λx. (x x))(λx. (x x)))"),o=z([]),i=z(null),s=z("");function c(e,t){return e.normal?"success":e.canonical?"error":0==t?"info":t==o.value.length-1?"warning":"default"}const w=([t,n]=f((async()=>([t,n]=f((()=>fetch("grammar.peggy"))),t=await t,n(),t).text())),t=await t,n(),t),b=E.generate(w);function _(e){i.value=e,s.value=[..._e(i.value)].toString()}function O(e){return me(b.parse(e))}function k(){try{const e=O(`(${l.value})`);o.value.length=0,o.value.push(new r(e)),_(e)}catch(e){return void a.error(e.toString())}}function S(){const e=we(i.value,ye.NormalOrder);e.redex?(o.value.push(new r(e.result,e.redex)),_(e.result)):a.info("Reducted to the final.")}function T(){const e=we(i.value,ye.ApplicativeOrder);e.redex?(o.value.push(new r(e.result,e.redex)),_(e.result)):a.info("Reducted to the final.")}return(e,t)=>(d(),h(y(Y),null,{default:p((()=>[m(y(N)),m(y(X),{"content-style":"padding: 24px"},{default:p((()=>[m(y(I),{cols:24},{default:p((()=>[m(y(P),{offset:3,span:18},{default:p((()=>[m(y(C),{vertical:"",size:"large"},{default:p((()=>[m(y($),{subtitle:"λ 演算"},{extra:p((()=>[(d(),h(A,null,{default:p((()=>[m(fe)])),_:1}))])),avatar:p((()=>[m(y(g),null,{default:p((()=>[m(y(v),{size:"16"},{default:p((()=>[m(y(D))])),_:1})])),_:1})])),title:p((()=>[Te])),_:1}),m(y(R),{size:"large"},{default:p((()=>[m(y(U),{placeholder:"λ term",value:l.value,"onUpdate:value":t[0]||(t[0]=e=>l.value=e)},{prefix:p((()=>[m(y(g),null,{default:p((()=>[m(y(v),{size:"16"},{default:p((()=>[m(y(B))])),_:1})])),_:1})])),_:1},8,["value"]),m(y(x),{onClick:k},{default:p((()=>[m(y(g),null,{default:p((()=>[m(y(v),{size:"16"},{default:p((()=>[m(y(G))])),_:1})])),_:1})])),_:1})])),_:1}),m(y(C),{size:"large"},{default:p((()=>[i.value?(d(),h(y(C),{key:0,size:"large",vertical:""},{default:p((()=>[m(y(M),{label:"Current",value:i.value.toText()},null,8,["value"]),m(y(M),{label:"Free Variables",value:s.value},null,8,["value"]),m(y(F),{vertical:"",style:{width:"100%"},size:"large"},{default:p((()=>[m(y(x),{onClick:S},{icon:p((()=>[m(y(g),null,{default:p((()=>[m(y(q))])),_:1})])),default:p((()=>[Le])),_:1}),m(y(x),{onClick:T},{icon:p((()=>[m(y(g),null,{default:p((()=>[m(y(H))])),_:1})])),default:p((()=>[Ce])),_:1})])),_:1})])),_:1})):K("",!0),o.value.length>0?(d(),h(y(V),{key:1},{default:p((()=>[(d(!0),J(W,null,Q(o.value,((e,t)=>(d(),h(y(ee),{key:e.text,title:e.text,time:e.redex,type:c(e,t)},null,8,["title","time","type"])))),128))])),_:1})):K("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}}));oe(((e,t)=>{for(const[n,r]of t)e[n]=r;return e})(c({setup:e=>(e,t)=>(d(),h(y(le),null,{default:p((()=>[m(y(ae),null,{default:p((()=>[m(y(te)),(d(),h(A,null,{default:p((()=>[m(je)])),fallback:p((()=>[m(y(ne),{size:80,id:"loading-spin"})])),_:1})),m(y(re),{right:100})])),_:1})])),_:1}))}),[["__scopeId","data-v-2b9ab68f"]])).mount("#app");
